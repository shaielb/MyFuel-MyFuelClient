package wrapper;

import javafx.scene.layout.BorderPane;
import javafx.fxml.FXMLLoader;
import db.entity.*;
import adapter.base.ControlAdapter;
import java.util.HashSet;
import widgets.table.Table;
import application.Main;
import controls.*;
import annotations.AutoGenerated;
import java.util.HashMap;
import javafx.scene.Parent;
import sceneswitch.SceneBase;
import java.util.Map;
import java.util.Collection;
import table.MfTable;
import widgets.table.*;
import client.IClient;

import javafx.scene.Scene;
import javafx.scene.control.*;
import action.*;
import db.interfaces.IEntity;
import javafx.scene.image.ImageView;
import java.util.Set;
import javafx.scene.text.Text;

@AutoGenerated
public class IncomeReportScreen extends SceneBase {

	public IncomeReportScreen(ISceneSwitcher sceneSwitcher, IClient client) throws Exception {
		super(sceneSwitcher, client);
		initialize();
	}

	public void initialize() throws Exception {
		Parent root = FXMLLoader.load(Main.class.getResource("IncomeReportScreen.fxml"));
		_scene = new Scene(root);

		//scene switchers
		MfImageView mainMenuStationManagerScreenControl = new MfImageView((ImageView) _scene.lookup("#scene$MainMenuStationManagerScreen"));
		mainMenuStationManagerScreenControl.addEvent((event) -> { _switcher.switchScene("MainMenuStationManagerScreen"); });

		//entities instantiation
		StationManagerReports stationManagerReports = new StationManagerReports();
		Station station = new Station();
		FuelingPurchase fuelingPurchaseBenzinAmount = new FuelingPurchase();
		FuelEnum fuelEnum = new FuelEnum();
		FuelingPurchase fuelingPurchaseSolerAmount = new FuelingPurchase();
		FuelingPurchase fuelingPurchaseMotorcycleAmount = new FuelingPurchase();
		FuelingPurchase fuelingPurchaseBenzinTotalPrice = new FuelingPurchase();
		FuelingPurchase fuelingPurchaseSolerTotalPrice = new FuelingPurchase();
		FuelingPurchase fuelingPurchaseMotorcycleTotalPrice = new FuelingPurchase();

		//entities assignments
		stationManagerReports.setStation(station);
		fuelingPurchaseBenzinAmount.setStation(station);
		fuelingPurchaseBenzinAmount.setFuelEnum(fuelEnum);
		fuelingPurchaseSolerAmount.setStation(station);
		fuelingPurchaseSolerAmount.setFuelEnum(fuelEnum);
		fuelingPurchaseMotorcycleAmount.setStation(station);
		fuelingPurchaseMotorcycleAmount.setFuelEnum(fuelEnum);
		fuelingPurchaseBenzinTotalPrice.setStation(station);
		fuelingPurchaseBenzinTotalPrice.setFuelEnum(fuelEnum);
		fuelingPurchaseSolerTotalPrice.setStation(station);
		fuelingPurchaseSolerTotalPrice.setFuelEnum(fuelEnum);
		fuelingPurchaseMotorcycleTotalPrice.setStation(station);
		fuelingPurchaseMotorcycleTotalPrice.setFuelEnum(fuelEnum);

		//controls instantiation
		MfText reportDateControlTxt = new MfText((Text) _scene.lookup("#table$station_manager_reports$report_date$$$txt"));
		MfText stationNameControl = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_name"));
		MfText amountControlBenzinAmount = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$fueling_purchase$fuel_enum$$$benzin$amount"));
		MfText amountControlSolerAmount = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$fueling_purchase$fuel_enum$$$soler$amount"));
		MfText amountControlMotorcycleAmount = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$fueling_purchase$fuel_enum$$$motorcycle$amount"));
		MfText totalPriceControlBenzinTotalPrice = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$fueling_purchase$fuel_enum$$$benzin$total_price"));
		MfText totalPriceControlSolerTotalPrice = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$fueling_purchase$fuel_enum$$$soler$total_price"));
		MfText totalPriceControlMotorcycleTotalPrice = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$fueling_purchase$fuel_enum$$$motorcycle$total_price"));
		MfComboBox reportDateControlCmb = new MfComboBox((ComboBox) _scene.lookup("#table$station_manager_reports$report_date$$$cmb"));

		//initializations
		MfImageView filterStationManagerReportsControl = new MfImageView((ImageView) _scene.lookup("#action$collect$station_manager_reports"));
		ActionControl stationManagerReportsfilterAction = new ActionControl();
		stationManagerReportsfilterAction.setControl(filterStationManagerReportsControl);
		FilterCapability stationManagerReportsFilterCapability = new FilterCapability();
		stationManagerReportsFilterCapability.setQueryEntities(prepareQuery(stationManagerReports));
		stationManagerReportsfilterAction.addCapability(stationManagerReportsFilterCapability);
		stationManagerReportsfilterAction.setClient(_client);
		stationManagerReportsfilterAction.setCallback((response) -> {
			Collection<IEntity> entities = response.getEntities();
			for (IEntity ientity : entities) {
				StationManagerReports entity = (StationManagerReports) ientity;
			}
		});

		//fields initializations
		reportDateControlTxt.setField(stationManagerReports.getClass().getDeclaredField("_report_date"));
		reportDateControlTxt.setEntity(stationManagerReports);

		stationNameControl.setField(station.getClass().getDeclaredField("_station_name"));
		stationNameControl.setEntity(station);

		amountControlBenzinAmount.setField(fuelingPurchaseBenzinAmount.getClass().getDeclaredField("_amount"));
		amountControlBenzinAmount.setEntity(fuelingPurchaseBenzinAmount);

		amountControlSolerAmount.setField(fuelingPurchaseSolerAmount.getClass().getDeclaredField("_amount"));
		amountControlSolerAmount.setEntity(fuelingPurchaseSolerAmount);

		amountControlMotorcycleAmount.setField(fuelingPurchaseMotorcycleAmount.getClass().getDeclaredField("_amount"));
		amountControlMotorcycleAmount.setEntity(fuelingPurchaseMotorcycleAmount);

		totalPriceControlBenzinTotalPrice.setField(fuelingPurchaseBenzinTotalPrice.getClass().getDeclaredField("_total_price"));
		totalPriceControlBenzinTotalPrice.setEntity(fuelingPurchaseBenzinTotalPrice);

		totalPriceControlSolerTotalPrice.setField(fuelingPurchaseSolerTotalPrice.getClass().getDeclaredField("_total_price"));
		totalPriceControlSolerTotalPrice.setEntity(fuelingPurchaseSolerTotalPrice);

		totalPriceControlMotorcycleTotalPrice.setField(fuelingPurchaseMotorcycleTotalPrice.getClass().getDeclaredField("_total_price"));
		totalPriceControlMotorcycleTotalPrice.setEntity(fuelingPurchaseMotorcycleTotalPrice);

		reportDateControlCmb.setField(stationManagerReports.getClass().getDeclaredField("_report_date"));
		reportDateControlCmb.setEntity(stationManagerReports);

		//grouping
		groupControls(new ControlAdapter[] { reportDateControlTxt, reportDateControlCmb });
		groupControls(new ControlAdapter[] { amountControlBenzinAmount, amountControlSolerAmount, amountControlMotorcycleAmount });
		groupControls(new ControlAdapter[] { totalPriceControlBenzinTotalPrice, totalPriceControlSolerTotalPrice, totalPriceControlMotorcycleTotalPrice });

	}
	private Map<IEntity, Map<String, String>> prepareQuery(StationManagerReports stationManagerReports) {
		Map<IEntity, Map<String, String>> map = new HashMap<IEntity, Map<String, String>>();
		
		Map<String, String> queryMap = new HashMap<String, String>();
		
		map.put(stationManagerReports, queryMap);
		return map;
	}
}
