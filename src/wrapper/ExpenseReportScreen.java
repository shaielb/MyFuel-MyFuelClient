package wrapper;

import java.util.ArrayList;
import java.util.Collection;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import action.ActionControl;
import action.FilterCapability;
import adapter.base.ControlAdapter;
import annotations.AutoGenerated;
import application.Main;
import client.IClient;
import controls.MfComboBox;
import controls.MfImageView;
import controls.MfText;
import db.entity.FuelEnum;
import db.entity.Station;
import db.entity.StationManagerReports;
import db.entity.StationSupplyOrder;
import db.interfaces.IEntity;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.control.ComboBox;
import javafx.scene.image.ImageView;
import javafx.scene.text.Text;
import messages.QueryContainer;
import sceneswitch.Context;
import sceneswitch.SceneBase;

@AutoGenerated
public class ExpenseReportScreen extends SceneBase {

	private StationManagerReports _stationManagerReports;
	private Station _station;
	private StationSupplyOrder _stationSupplyOrderBenzinAmount;
	private FuelEnum _fuelEnum;
	private StationSupplyOrder _stationSupplyOrderSolerAmount;
	private StationSupplyOrder _stationSupplyOrderMotorcycleAmount;
	private StationSupplyOrder _stationSupplyOrderBenzinTotalPrice;
	private StationSupplyOrder _stationSupplyOrderSolerTotalPrice;
	private StationSupplyOrder _stationSupplyOrderMotorcycleTotalPrice;

	private MfImageView _mainMenuStationManagerScreenControl;
	private MfText _reportDateControlTxt;
	private MfText _stationNameControl;
	private MfText _amountControlBenzinAmount;
	private MfText _amountControlSolerAmount;
	private MfText _amountControlMotorcycleAmount;
	private MfText _totalPriceControlBenzinTotalPrice;
	private MfText _totalPriceControlSolerTotalPrice;
	private MfText _totalPriceControlMotorcycleTotalPrice;
	private MfImageView _filterStationManagerReportsControl;
	private ActionControl _stationManagerReportsfilterAction;
	private MfComboBox _reportDateControlCmb;

	public ExpenseReportScreen(ISceneSwitcher sceneSwitcher, IClient client, Context context) throws Exception {
		super(sceneSwitcher, client, context);
		initialize();
	}

	public void initialize() throws Exception {
		Parent root = FXMLLoader.load(Main.class.getResource("ExpenseReportScreen.fxml"));
		_scene = new Scene(root);

		//scene switchers
		_mainMenuStationManagerScreenControl = new MfImageView((ImageView) _scene.lookup("#scene$MainMenuStationManagerScreen"));
		_mainMenuStationManagerScreenControl.addEvent((event) -> { _switcher.switchScene("MainMenuStationManagerScreen"); });

		//entities instantiation
		_stationManagerReports = new StationManagerReports();
		_station = new Station();
		_stationSupplyOrderBenzinAmount = new StationSupplyOrder();
		_fuelEnum = new FuelEnum();
		_stationSupplyOrderSolerAmount = new StationSupplyOrder();
		_stationSupplyOrderMotorcycleAmount = new StationSupplyOrder();
		_stationSupplyOrderBenzinTotalPrice = new StationSupplyOrder();
		_stationSupplyOrderSolerTotalPrice = new StationSupplyOrder();
		_stationSupplyOrderMotorcycleTotalPrice = new StationSupplyOrder();

		//entities assignments
		_stationManagerReports.setStation(_station);
		_stationSupplyOrderBenzinAmount.setStation(_station);
		_stationSupplyOrderBenzinAmount.setFuelEnum(_fuelEnum);
		_stationManagerReports.setFuelEnum(_fuelEnum);
		_stationSupplyOrderSolerAmount.setStation(_station);
		_stationSupplyOrderSolerAmount.setFuelEnum(_fuelEnum);
		_stationSupplyOrderMotorcycleAmount.setStation(_station);
		_stationSupplyOrderMotorcycleAmount.setFuelEnum(_fuelEnum);
		_stationSupplyOrderBenzinTotalPrice.setStation(_station);
		_stationSupplyOrderBenzinTotalPrice.setFuelEnum(_fuelEnum);
		_stationSupplyOrderSolerTotalPrice.setStation(_station);
		_stationSupplyOrderSolerTotalPrice.setFuelEnum(_fuelEnum);
		_stationSupplyOrderMotorcycleTotalPrice.setStation(_station);
		_stationSupplyOrderMotorcycleTotalPrice.setFuelEnum(_fuelEnum);

		//controls instantiation
		_reportDateControlTxt = new MfText((Text) _scene.lookup("#table$station_manager_reports$report_date$$$txt"));
		_stationNameControl = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_name"));
		_amountControlBenzinAmount = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$benzin$amount"));
		_amountControlSolerAmount = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$soler$amount"));
		_amountControlMotorcycleAmount = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$motorcycle$amount"));
		_totalPriceControlBenzinTotalPrice = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$benzin$total_price"));
		_totalPriceControlSolerTotalPrice = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$soler$total_price"));
		_totalPriceControlMotorcycleTotalPrice = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$motorcycle$total_price"));
		_reportDateControlCmb = new MfComboBox((ComboBox) _scene.lookup("#table$station_manager_reports$report_date$$$cmb"));

		//initializations
		_filterStationManagerReportsControl = new MfImageView((ImageView) _scene.lookup("#action$collect$station_manager_reports"));
		_stationManagerReportsfilterAction = new ActionControl();
		_stationManagerReportsfilterAction.setControl(_filterStationManagerReportsControl);
		FilterCapability stationManagerReportsFilterCapability = new FilterCapability();
		stationManagerReportsFilterCapability.setQueryContainers(prepareQuery(_stationManagerReports));
		_stationManagerReportsfilterAction.addCapability(stationManagerReportsFilterCapability);
		_stationManagerReportsfilterAction.setClient(_client);
		_stationManagerReportsfilterAction.setCallback((response) -> {
			Collection<IEntity> entities = response.getEntities();
			for (IEntity ientity : entities) {
				StationManagerReports entity = (StationManagerReports) ientity;
			}
		});

		//fields initializations
		_reportDateControlTxt.setField(_stationManagerReports.getClass().getDeclaredField("_report_date"));
		_reportDateControlTxt.setEntity(_stationManagerReports);

		_stationNameControl.setField(_station.getClass().getDeclaredField("_station_name"));
		_stationNameControl.setEntity(_station);

		_amountControlBenzinAmount.setField(_stationSupplyOrderBenzinAmount.getClass().getDeclaredField("_amount"));
		_amountControlBenzinAmount.setEntity(_stationSupplyOrderBenzinAmount);

		_amountControlSolerAmount.setField(_stationSupplyOrderSolerAmount.getClass().getDeclaredField("_amount"));
		_amountControlSolerAmount.setEntity(_stationSupplyOrderSolerAmount);

		_amountControlMotorcycleAmount.setField(_stationSupplyOrderMotorcycleAmount.getClass().getDeclaredField("_amount"));
		_amountControlMotorcycleAmount.setEntity(_stationSupplyOrderMotorcycleAmount);

		_totalPriceControlBenzinTotalPrice.setField(_stationSupplyOrderBenzinTotalPrice.getClass().getDeclaredField("_total_price"));
		_totalPriceControlBenzinTotalPrice.setEntity(_stationSupplyOrderBenzinTotalPrice);

		_totalPriceControlSolerTotalPrice.setField(_stationSupplyOrderSolerTotalPrice.getClass().getDeclaredField("_total_price"));
		_totalPriceControlSolerTotalPrice.setEntity(_stationSupplyOrderSolerTotalPrice);

		_totalPriceControlMotorcycleTotalPrice.setField(_stationSupplyOrderMotorcycleTotalPrice.getClass().getDeclaredField("_total_price"));
		_totalPriceControlMotorcycleTotalPrice.setEntity(_stationSupplyOrderMotorcycleTotalPrice);

		_reportDateControlCmb.setField(_stationManagerReports.getClass().getDeclaredField("_report_date"));
		_reportDateControlCmb.setEntity(_stationManagerReports);

		//grouping
		groupControls(new ControlAdapter[] { _reportDateControlTxt, _reportDateControlCmb });
		groupControls(new ControlAdapter[] { _amountControlBenzinAmount, _amountControlSolerAmount, _amountControlMotorcycleAmount });
		groupControls(new ControlAdapter[] { _totalPriceControlBenzinTotalPrice, _totalPriceControlSolerTotalPrice, _totalPriceControlMotorcycleTotalPrice });

	}

	private List<QueryContainer> prepareQuery(StationManagerReports stationManagerReports) {
		List<QueryContainer> containers = new ArrayList<QueryContainer>();
		
		Map<String, String> queryMap = new HashMap<String, String>();
		
		QueryContainer container = new QueryContainer();
		container.setQueryEntity(stationManagerReports);
		container.setQueryMap(queryMap);
		containers.add(container);
		return containers;
	}

	public StationManagerReports getStationManagerReports() {
		 return _stationManagerReports;
	}

	public void setStationManagerReports(StationManagerReports stationManagerReports) {
		 _stationManagerReports = stationManagerReports;
	}

	public Station getStation() {
		 return _station;
	}

	public void setStation(Station station) {
		 _station = station;
	}

	public StationSupplyOrder getStationSupplyOrderBenzinAmount() {
		 return _stationSupplyOrderBenzinAmount;
	}

	public void setStationSupplyOrderBenzinAmount(StationSupplyOrder stationSupplyOrderBenzinAmount) {
		 _stationSupplyOrderBenzinAmount = stationSupplyOrderBenzinAmount;
	}

	public FuelEnum getFuelEnum() {
		 return _fuelEnum;
	}

	public void setFuelEnum(FuelEnum fuelEnum) {
		 _fuelEnum = fuelEnum;
	}

	public StationSupplyOrder getStationSupplyOrderSolerAmount() {
		 return _stationSupplyOrderSolerAmount;
	}

	public void setStationSupplyOrderSolerAmount(StationSupplyOrder stationSupplyOrderSolerAmount) {
		 _stationSupplyOrderSolerAmount = stationSupplyOrderSolerAmount;
	}

	public StationSupplyOrder getStationSupplyOrderMotorcycleAmount() {
		 return _stationSupplyOrderMotorcycleAmount;
	}

	public void setStationSupplyOrderMotorcycleAmount(StationSupplyOrder stationSupplyOrderMotorcycleAmount) {
		 _stationSupplyOrderMotorcycleAmount = stationSupplyOrderMotorcycleAmount;
	}

	public StationSupplyOrder getStationSupplyOrderBenzinTotalPrice() {
		 return _stationSupplyOrderBenzinTotalPrice;
	}

	public void setStationSupplyOrderBenzinTotalPrice(StationSupplyOrder stationSupplyOrderBenzinTotalPrice) {
		 _stationSupplyOrderBenzinTotalPrice = stationSupplyOrderBenzinTotalPrice;
	}

	public StationSupplyOrder getStationSupplyOrderSolerTotalPrice() {
		 return _stationSupplyOrderSolerTotalPrice;
	}

	public void setStationSupplyOrderSolerTotalPrice(StationSupplyOrder stationSupplyOrderSolerTotalPrice) {
		 _stationSupplyOrderSolerTotalPrice = stationSupplyOrderSolerTotalPrice;
	}

	public StationSupplyOrder getStationSupplyOrderMotorcycleTotalPrice() {
		 return _stationSupplyOrderMotorcycleTotalPrice;
	}

	public void setStationSupplyOrderMotorcycleTotalPrice(StationSupplyOrder stationSupplyOrderMotorcycleTotalPrice) {
		 _stationSupplyOrderMotorcycleTotalPrice = stationSupplyOrderMotorcycleTotalPrice;
	}
}
