package wrapper;

import javafx.scene.layout.BorderPane;
import javafx.fxml.FXMLLoader;
import db.entity.*;
import adapter.base.ControlAdapter;
import java.util.HashSet;
import widgets.table.Table;
import application.Main;
import controls.*;
import annotations.AutoGenerated;
import java.util.HashMap;
import javafx.scene.Parent;
import sceneswitch.SceneBase;
import java.util.Map;
import java.util.Collection;
import table.MfTable;
import widgets.table.*;
import client.IClient;

import javafx.scene.Scene;
import javafx.scene.control.*;
import action.*;
import db.interfaces.IEntity;
import javafx.scene.image.ImageView;
import java.util.Set;
import javafx.scene.text.Text;

@AutoGenerated
public class ExpenseReportScreen extends SceneBase {

	public ExpenseReportScreen(ISceneSwitcher sceneSwitcher, IClient client) throws Exception {
		super(sceneSwitcher, client);
		initialize();
	}

	public void initialize() throws Exception {
		Parent root = FXMLLoader.load(Main.class.getResource("ExpenseReportScreen.fxml"));
		_scene = new Scene(root);

		//scene switchers
		MfImageView mainMenuStationManagerScreenControl = new MfImageView((ImageView) _scene.lookup("#scene$MainMenuStationManagerScreen"));
		mainMenuStationManagerScreenControl.addEvent((event) -> { _switcher.switchScene("MainMenuStationManagerScreen"); });

		//entities instantiation
		StationManagerReports stationManagerReports = new StationManagerReports();
		Station station = new Station();
		StationSupplyOrder stationSupplyOrderBenzinAmount = new StationSupplyOrder();
		FuelEnum fuelEnum = new FuelEnum();
		StationSupplyOrder stationSupplyOrderSolerAmount = new StationSupplyOrder();
		StationSupplyOrder stationSupplyOrderMotorcycleAmount = new StationSupplyOrder();
		StationSupplyOrder stationSupplyOrderBenzinTotalPrice = new StationSupplyOrder();
		StationSupplyOrder stationSupplyOrderSolerTotalPrice = new StationSupplyOrder();
		StationSupplyOrder stationSupplyOrderMotorcycleTotalPrice = new StationSupplyOrder();

		//entities assignments
		stationManagerReports.setStation(station);
		stationSupplyOrderBenzinAmount.setStation(station);
		stationSupplyOrderBenzinAmount.setFuelEnum(fuelEnum);
		stationSupplyOrderSolerAmount.setStation(station);
		stationSupplyOrderSolerAmount.setFuelEnum(fuelEnum);
		stationSupplyOrderMotorcycleAmount.setStation(station);
		stationSupplyOrderMotorcycleAmount.setFuelEnum(fuelEnum);
		stationSupplyOrderBenzinTotalPrice.setStation(station);
		stationSupplyOrderBenzinTotalPrice.setFuelEnum(fuelEnum);
		stationSupplyOrderSolerTotalPrice.setStation(station);
		stationSupplyOrderSolerTotalPrice.setFuelEnum(fuelEnum);
		stationSupplyOrderMotorcycleTotalPrice.setStation(station);
		stationSupplyOrderMotorcycleTotalPrice.setFuelEnum(fuelEnum);

		//controls instantiation
		MfText reportDateControlTxt = new MfText((Text) _scene.lookup("#table$station_manager_reports$report_date$$$txt"));
		MfText stationNameControl = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_name"));
		MfText amountControlBenzinAmount = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$benzin$amount"));
		MfText amountControlSolerAmount = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$soler$amount"));
		MfText amountControlMotorcycleAmount = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$motorcycle$amount"));
		MfText totalPriceControlBenzinTotalPrice = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$benzin$total_price"));
		MfText totalPriceControlSolerTotalPrice = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$soler$total_price"));
		MfText totalPriceControlMotorcycleTotalPrice = new MfText((Text) _scene.lookup("#table$station_manager_reports$station$station_supply_order$fuel_enum$$$motorcycle$total_price"));
		MfComboBox reportDateControlCmb = new MfComboBox((ComboBox) _scene.lookup("#table$station_manager_reports$report_date$$$cmb"));

		//initializations
		MfImageView filterStationManagerReportsControl = new MfImageView((ImageView) _scene.lookup("#action$collect$station_manager_reports"));
		ActionControl stationManagerReportsfilterAction = new ActionControl();
		stationManagerReportsfilterAction.setControl(filterStationManagerReportsControl);
		FilterCapability stationManagerReportsFilterCapability = new FilterCapability();
		stationManagerReportsFilterCapability.setQueryEntities(prepareQuery(stationManagerReports));
		stationManagerReportsfilterAction.addCapability(stationManagerReportsFilterCapability);
		stationManagerReportsfilterAction.setClient(_client);
		stationManagerReportsfilterAction.setCallback((response) -> {
			Collection<IEntity> entities = response.getEntities();
			for (IEntity ientity : entities) {
				StationManagerReports entity = (StationManagerReports) ientity;
			}
		});

		//fields initializations
		reportDateControlTxt.setField(stationManagerReports.getClass().getDeclaredField("_report_date"));
		reportDateControlTxt.setEntity(stationManagerReports);

		stationNameControl.setField(station.getClass().getDeclaredField("_station_name"));
		stationNameControl.setEntity(station);

		amountControlBenzinAmount.setField(stationSupplyOrderBenzinAmount.getClass().getDeclaredField("_amount"));
		amountControlBenzinAmount.setEntity(stationSupplyOrderBenzinAmount);

		amountControlSolerAmount.setField(stationSupplyOrderSolerAmount.getClass().getDeclaredField("_amount"));
		amountControlSolerAmount.setEntity(stationSupplyOrderSolerAmount);

		amountControlMotorcycleAmount.setField(stationSupplyOrderMotorcycleAmount.getClass().getDeclaredField("_amount"));
		amountControlMotorcycleAmount.setEntity(stationSupplyOrderMotorcycleAmount);

		totalPriceControlBenzinTotalPrice.setField(stationSupplyOrderBenzinTotalPrice.getClass().getDeclaredField("_total_price"));
		totalPriceControlBenzinTotalPrice.setEntity(stationSupplyOrderBenzinTotalPrice);

		totalPriceControlSolerTotalPrice.setField(stationSupplyOrderSolerTotalPrice.getClass().getDeclaredField("_total_price"));
		totalPriceControlSolerTotalPrice.setEntity(stationSupplyOrderSolerTotalPrice);

		totalPriceControlMotorcycleTotalPrice.setField(stationSupplyOrderMotorcycleTotalPrice.getClass().getDeclaredField("_total_price"));
		totalPriceControlMotorcycleTotalPrice.setEntity(stationSupplyOrderMotorcycleTotalPrice);

		reportDateControlCmb.setField(stationManagerReports.getClass().getDeclaredField("_report_date"));
		reportDateControlCmb.setEntity(stationManagerReports);

		//grouping
		groupControls(new ControlAdapter[] { reportDateControlTxt, reportDateControlCmb });
		groupControls(new ControlAdapter[] { amountControlBenzinAmount, amountControlSolerAmount, amountControlMotorcycleAmount });
		groupControls(new ControlAdapter[] { totalPriceControlBenzinTotalPrice, totalPriceControlSolerTotalPrice, totalPriceControlMotorcycleTotalPrice });

	}
	private Map<IEntity, Map<String, String>> prepareQuery(StationManagerReports stationManagerReports) {
		Map<IEntity, Map<String, String>> map = new HashMap<IEntity, Map<String, String>>();
		
		Map<String, String> queryMap = new HashMap<String, String>();
		
		map.put(stationManagerReports, queryMap);
		return map;
	}
}
